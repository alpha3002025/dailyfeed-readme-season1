
# dailyfeed-infrastructure, dailyfeed-app-helm
dailyfeed-installer í”„ë¡œì íŠ¸ ë‚´ì—ëŠ” dailyfeed-infrastructure, dailyfeed-app-helm ëª¨ë“ˆì´ ìˆìŠµë‹ˆë‹¤. ê°ê°ì€ ì´ˆê¸° ê°œë°œ ì‹œì—ëŠ” ëª¨ë‘ local í”„ë¡œí•„ì— ëŒ€í•´ì„œëŠ” ìˆ˜ì‘ì—…ìœ¼ë¡œ í•˜ë‚˜ì”© ì‰˜ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰ êµ¬ì¡°ë¥¼ ì •ì˜í–ˆê³ , local í”„ë¡œí•„ì— ëŒ€í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ í•œë²Œì´ ë§Œë“¤ì–´ì¡Œì„ë•Œ ì´ local í”„ë¡œí•„ ê¸°ë°˜ì˜ ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ dev í”„ë¡œí•„ ê¸°ë°˜ì˜ ìŠ¤í¬ë¦½íŠ¸ ë“¤ì„ AI ì—ì´ì „íŠ¸(Claude Code)ë¥¼ ì´ìš©í•´ì„œ dev í”„ë¡œí•„ ê¸°ë°˜ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.<br/>

ì²˜ìŒë¶€í„° ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì„ AI ë¥¼ ì´ìš©í•´ì„œ ì¸í”„ë¼ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ AI ì™€ ê²°êµ­ì—” ì‹¸ìš°ê²Œ ë ê²ƒ ê°™ì•„ì„œ... ì²˜ìŒì—ëŠ” ì›ë˜ ì•Œê³  ìˆë˜ ì§€ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¡°ë¥¼ ì¡ìœ¼ë©´ì„œ ë””ë²„ê¹…ì„ í• ë•Œì—ë§Œ AIì˜ ë„ì›€ì„ ë°›ì•˜ê³ , ì™„ì„±ëœ í•œ ë²Œì´ ë§Œë“¤ì–´ì¡Œì„ ë•Œ dev ê¸°ë°˜ì˜ ìŠ¤í¬ë¦½íŠ¸, local-hybrid ê¸°ë°˜ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.<br/>
<br/>

```
dailyfeed-installer
  ã„´ dailyfeed-infrastructure
  ã„´ dailyfeed-app-helm
```
<br/>

**`dailyfeed-infrastructure`** ëŠ” MySQL, MongoDB, Kafka, Redis ë¥¼ local, local-hybrid, dev í™˜ê²½ì— ë§ë„ë¡ ì„¤ì¹˜í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ì„œë¸Œëª¨ë“ˆì…ë‹ˆë‹¤. https://github.com/alpha3002025/dailyfeed-infrastructure ì— ê°œë³„ ë¦¬í¬ì§€í„°ë¦¬ê°€ ì¡´ì¬í•˜ë©° dailyfeed-installer (https://githib.com/alpha3002025/dailyfeed-installer) ë‚´ì— git submodule ë¡œ ë“±ë¡ë˜ì–´ìˆìŠµë‹ˆë‹¤.<br/>

**`dailyfeed-app-helm`** ì€ ëª¨ë“  ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“¤ì— ëŒ€í•œ helm ì„ ê´€ë¦¬í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. https://github.com/alpha3002025/daildailyfeed-installer (https://githib.com/alpha3002025/dailyfeed-installer) ë‚´ì— git submodule ë¡œ ë“±ë¡ë˜ì–´ìˆìŠµë‹ˆë‹¤.<br/>
<br/>
<br/>

# `dailyfeed-infrastructure`
> Project Github : https://github.com/alpha3002025/dailyfeed-infrastructure

<br/>

infrastructure ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì— ëŒ€í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. `dailyfeed-infrastructure/install-local-hybrid.sh` ë¥¼ í†µí•´ infra ë“¤ì´ ì„¤ì¹˜ë˜ë©° ë‹¤ìŒì˜ ì‘ì—…ë“¤ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.<br/>
- `Kind` ê¸°ë°˜ì˜ k8s í´ëŸ¬ìŠ¤í„° ì„¤ì¹˜
- `MySQL, MongoDB, Kafka, Redis` ë¥¼ docker-compose ê¸°ë°˜ìœ¼ë¡œ ì„¤ì¹˜
- `Kind` ì˜ control plane ì»¨í…Œì´ë„ˆ, worker node ì»¨í…Œì´ë„ˆ ë“¤ì„ docker-compose ë„¤íŠ¸ì›Œí¬ì— connect
<br/>

**`install-local.sh` -`local` ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸**<br/>
> ì°¸ê³  : `dailyfeed-infrastructre/install-local.sh`<br/>

ê°œë°œ ì´ˆë°˜ì—ëŠ” `install-local.sh` ì— ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í–ˆê³ , ì´ ìŠ¤í¬ë¦½íŠ¸ ë‚´ì—ì„œëŠ” MySQL, MongoDB, Kafka, Redis ë¥¼ ëª¨ë‘ helm ìœ¼ë¡œ í•¨ê»˜ kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì— í•¨ê»˜ ì„¤ì¹˜í•˜ë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ kubernetes ë‚´ì— MySQL, MongoDB, Kafka, Redis ë¥¼ helm ìœ¼ë¡œ ë°°í¬í–ˆê¸°ì— ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ê³¼ í´ëŸ¬ìŠ¤í„°ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•˜ê²Œ ë˜ê¸°ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì •í™•í•œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ íŒŒì•…í•˜ê¸° ì‰½ì ì•Šë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ HPA ì„¤ì • ì‹œ ì¸í”„ë¼(MySQL, MongoDB, Kafka, Redis)ì™€ ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ ë¦¬ì†ŒìŠ¤ ê²½í•©ì´ ë°œìƒí•˜ê¸°ì— HPA ì„¤ì •ì‹œ ì •í™•í•œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ë¶€ì—¬ì— ì–´ë ¤ì›€ì„ ê²ªê²Œë˜ì—ˆìŠµë‹ˆë‹¤.<br/>

ì¦‰, ì¸í”„ë¼(MySQL, MongoDB, Kafka, Redis) ë¦¬ì†ŒìŠ¤ì™€ ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ì†ŒìŠ¤ ê°„ ë¶„ë¦¬ê°€ ì´ë¤„ì§€ì§€ ì•Šì•„ì„œ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì£¼ëŠ” í˜„ìƒì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ëŸ° ì´ìœ ë¡œ ì•„ë˜ì—ì„œ ì„¤ëª…í•  `install-local-hybrid.sh` ìŠ¤í¬ë¦½íŠ¸ë¡œì˜ ì „í™˜ ì‘ì—…ì„ ì‹œì‘í•˜ê²Œ ëìŠµë‹ˆë‹¤.<br/>
<br/>

**`install-local-hybrid.sh` - `local` â `local-hybrid`**<br/>
> ì°¸ê³  : `dailyfeed-infrastructre/install-local.sh`<br/>

ì´ ë°©ì‹ì€ ì¸í”„ë¼(MySQL, MongoDB, Kafka, Redis)ëŠ” `docker-compose.yaml` ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“¤ì€ helm ì„ í†µí•´ ë°°í¬ë©ë‹ˆë‹¤. ì¸í”„ë¼(MySQL, MongoDB, Kafka, Redis) ì˜ì—­ì€ ë³„ë„ì˜ ì˜ì—­ì—ì„œ ì‹¤í–‰ë˜ë©°, HPA ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ê´€ë¦¬ë˜ì–´ì•¼ í•  ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜¨ helm ì„ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.<br/>

- ì¸í”„ë¼(MySQL, MongoDB, Kafka, Redis) : Docker Compose ê¸°ë°˜ìœ¼ë¡œ ì„¤ì¹˜, ë…ë¦½ëœ ì˜ì—­ì— ì„¤ì¹˜ (dailyfeed-infrastructure ì— ì •ì˜)
- ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ : helm ê¸°ë°˜ìœ¼ë¡œ ì„¤ì¹˜, kind ê¸°ë°˜ kubernetes ë‚´ì— ì„¤ì¹˜ (dailyfeed-app-helm ë‚´ì— ì •ì˜)

ì´ë•Œ ì„œë¡œ ë¶„ë¦¬ëœ ì˜ì—­ì—ì„œ ì¸í”„ë¼ì™€ ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ê¸°ì— ì„œë¡œì˜ docker network ë¥¼ ì—°ê²°ì‹œì¼œì¤˜ì•¼ í•˜ëŠ”ë°, ì´ ì‘ì—…ì€ kind ì˜ control plane node, worker node ì˜ ê° ì»¨í…Œì´ë„ˆì— docker connect ë¥¼ í†µí•´ ê° network ë¥¼ ì—°ê²°í•´ì£¼ëŠ” script ë¥¼ ì¶”ê°€í•´ì„œ í•´ê²°í–ˆìœ¼ë©° ê´€ë ¨ëœ ì†ŒìŠ¤ì½”ë“œì˜ ì¼ë¶€ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br/>
<br/>


**`dailyfeed-infrastructure/install-local-hybrid.sh`**<br/>
```sh

### ...


# Kind í´ëŸ¬ìŠ¤í„°ì˜ ì»¨í…Œì´ë„ˆë¥¼ dailyfeed-networkì— ì—°ê²°
NETWORK_NAME="local-hybrid_dailyfeed-network"

# Kind ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì—°ê²°
KIND_CONTROL_PLANE="istio-cluster-control-plane"
if docker ps --format '{{.Names}}' | grep -q "^${KIND_CONTROL_PLANE}$"; then
    echo "  â†’ Connecting ${KIND_CONTROL_PLANE} to ${NETWORK_NAME}..."
    docker network connect ${NETWORK_NAME} ${KIND_CONTROL_PLANE} 2>/dev/null || echo "  âœ“ Already connected"
else
    echo "  âš ï¸  ${KIND_CONTROL_PLANE} not found"
fi

# Kind ì›Œì»¤ ë…¸ë“œë“¤ ì—°ê²° (ìˆëŠ” ê²½ìš°)
for worker in $(docker ps --format '{{.Names}}' | grep "^istio-cluster-worker"); do
    echo "  â†’ Connecting ${worker} to ${NETWORK_NAME}..."
    docker network connect ${NETWORK_NAME} ${worker} 2>/dev/null || echo "  âœ“ Already connected"
done

echo "  âœ… Network connection completed"
echo ""

echo "=== ğŸ”— Connecting Docker Compose infrastructure to Kind network ==="
echo "This allows bidirectional communication between Docker Compose and Kubernetes"

# Docker Compose ì¸í”„ë¼ ì»¨í…Œì´ë„ˆë“¤ì„ Kind ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°
KIND_NETWORK="kind"

# Kafka ë¸Œë¡œì»¤ë“¤ ì—°ê²°
for kafka in kafka-1 kafka-2 kafka-3; do
    if docker ps --format '{{.Names}}' | grep -q "^${kafka}$"; then
        echo "  â†’ Connecting ${kafka} to ${KIND_NETWORK}..."
        docker network connect ${KIND_NETWORK} ${kafka} 2>/dev/null || echo "  âœ“ Already connected"
    else
        echo "  âš ï¸  ${kafka} not found"
    fi
done

# MongoDB ë ˆí”Œë¦¬ì¹´ì…‹ ì—°ê²°
for mongo in mongo-dailyfeed-1 mongo-dailyfeed-2 mongo-dailyfeed-3; do
    if docker ps --format '{{.Names}}' | grep -q "^${mongo}$"; then
        echo "  â†’ Connecting ${mongo} to ${KIND_NETWORK}..."
        docker network connect ${KIND_NETWORK} ${mongo} 2>/dev/null || echo "  âœ“ Already connected"
    else
        echo "  âš ï¸  ${mongo} not found"
    fi
done

# Redis ì—°ê²°
if docker ps --format '{{.Names}}' | grep -q "^redis-dailyfeed$"; then
    echo "  â†’ Connecting redis-dailyfeed to ${KIND_NETWORK}..."
    docker network connect ${KIND_NETWORK} redis-dailyfeed 2>/dev/null || echo "  âœ“ Already connected"
else
    echo "  âš ï¸  redis-dailyfeed not found"
fi

# MySQL ì—°ê²°
if docker ps --format '{{.Names}}' | grep -q "^mysql-dailyfeed$"; then
    echo "  â†’ Connecting mysql-dailyfeed to ${KIND_NETWORK}..."
    docker network connect ${KIND_NETWORK} mysql-dailyfeed 2>/dev/null || echo "  âœ“ Already connected"
else
    echo "  âš ï¸  mysql-dailyfeed not found"
fi

echo "  âœ… Infrastructure network connection completed"
```
<br/>

**`install-dev.sh`**<br/>
> ì°¸ê³ : `dailyfeed-infrastructure/install-dev.sh`<br/>

MySQL, MongoDB ë¥¼ ì™¸ë¶€ í´ë¼ìš°ë“œ ì—…ì²´ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ëŠ” ë²„ì „ì˜ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤. `install-local.sh`ë¥¼ ë§Œë“¤ë•Œ ë“¤ì—ˆë˜ ì‹œê°„ê³¼ ì •ì„±ì„ `install-dev.sh`ì—ë„ ë˜‘ê°™ì´ ìŸì•„ë¶€ì„ ìˆ˜ ì—¬ê±´ì´ ë˜ì§€ ì•Šì•„ì„œ ì‹œê°„ê´€ê³„ìƒ AI ë¥¼ í™œìš©í•´ì•¼ í–ˆê³ , `install-dev.sh` ì˜ ê²½ìš° Claude Code ë‚´ì—ì„œ `install-local.sh` ë¥¼ ì°¸ê³ í•´ì„œ `install-dev.sh`ì—ì„œ ì‚¬ìš©í•  dev í™˜ê²½ì˜ RDS, Atlas Mongodb ì˜ ì£¼ì†Œ ì„¸íŒ…, ì ‘ì† ê³„ì • ë“±ì„ Secret,Service ë“±ì„ í†µí•´ ì§€ì •í–ë„ë¡ í–ˆìŠµë‹ˆë‹¤.<br/>

Claude Code ë„ í•œë²ˆì— ì •í™•í•œ ë‹µì„ ë‚´ì§€ëŠ” ì•Šê¸°ì— ìì£¼ í™•ì¸ í›„ ì¦ìƒì„ ìˆ˜ì •í•´ë‚˜ê°€ëŠ” ê³¼ì •ì„ ê±°ì³¤ìœ¼ë©°, ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸¡ ì½”ë“œë¥¼ local í™˜ê²½ì—ì„œ ê°œë°œ ì‘ì—…ì„ í•˜ë©´ì„œ ì£¼ê¸°ì ìœ¼ë¡œ Claude Code ë¡œ ì‘ì—…ì´ ì§„í–‰ëœ ë‚´ìš©ì„ í™•ì¸í•˜ë©´ì„œ ì¸í”„ë¼ ìª½ì˜ ì‘ì—…ë„ í™•ì¸í•´ë‚˜ê°€ëŠ” ê³¼ì •ì„ ê±°ì³¤ìŠµë‹ˆë‹¤.<br/>

dev í™˜ê²½ì˜ ê²½ìš° `install-dev.sh`ëŠ” ì•„ì§ ì™„ì „í•˜ê²Œ ë§ˆìŒì— ë“¤ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì ‘ì† ê³„ì •, ì ‘ì† ì£¼ì†Œ ë“±ì„ secret ì— BASE64 ì¸ì½”ë”©ì„ í•´ì„œ í‰ë¬¸ìœ¼ë¡œë§Œ ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ í•´ë‘ì–´ github repository ë‚´ì˜ ì¸í”„ë¼ ì£¼ì†Œê°€ í‰ë¬¸ ê²€ìƒ‰ìœ¼ë¡œ ì¡°íšŒë˜ì§€ ì•Šë„ë¡ í•´ë‘ì—ˆë‹¤ëŠ” ê²ƒ ë§Œìœ¼ë¡œëŠ” ì•„ì§ê¹Œì§€ëŠ” ë§Œì¡±ê°ì„ ëŠë¼ì§€ëŠ” ì•Šì§€ë§Œ, ì‹œê°„ ê´€ê³„ìƒ ì´ ì •ë„ ê¹Œì§€ë§Œ ì™„ì„±ì„ í•´ë‘ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.<br/>
<br/>

í˜„ì¬ dev í™˜ê²½ì˜ infra ëŠ” ë¡œì»¬ì—ì„œë§Œ ì ‘ì†ì´ ë©ë‹ˆë‹¤. í´ë¼ìš°ë“œ ì¸í”„ë¼ ë‚´ì— dev í”„ë¡œí•„ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì„ ì˜¬ë ¤ë‘ê¸°ì—ëŠ” ë¹„ìš©ìƒìœ¼ë¡œ ì••ë°•ì´ ì¢€ ìˆê¸°ì—, ë¡œì»¬ì—ì„œ dev í”„ë¡œí•„ë¡œ ì ‘ì†ì´ ë˜ë„ë¡ í•´ë‘ì—ˆê³ , í´ë¼ìš°ë“œ ì¸í”„ë¼ ë‚´ì— ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í–ˆì„ ë•Œ ì´ë¡ ìƒìœ¼ë¡œëŠ” ëª¨ë‘ ì´ìƒ ì—†ì´ ë™ì‘í•œë‹¤ê³  ë³¼ìˆ˜ëŠ” ìˆì§€ë§Œ, ì‹¤ì œ dev í™˜ê²½ì„ êµ¬ì„±í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.<br/>
<br/>

season 2 ë¡œ ê°œë°œí•˜ë ¤ëŠ” ìƒˆë¡œìš´ ë²„ì „ì˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë¡œì»¬ì—ì„œ dev ì¸í”„ë¼ì— ì ‘ì†í• ë•Œì— ëŒ€í•´ ì ‘ì†ì£¼ì†Œ ë“±ì„ ê°€ì§€ê³  ìˆëŠ” docker image ê¸°ë°˜ì˜ ì†Œí˜• ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ì„œ, ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ sidecar ë¡œ ë‘ì–´ì„œ ë°°í¬í•˜ê±°ë‚˜, Config Serverë¥¼ ìš´ì˜í•˜ê±°ë‚˜ í•˜ëŠ” ë“±ì˜ ì „ëµë“¤ì„ ìƒê° ì¤‘ ì…ë‹ˆë‹¤.<br/>
<br/>


# dailyfeed-app-helm
> Project Github : https://github.com/alpha3002025/dailyfeed-app-helm

ëª¨ë“  ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì˜ helm ì°¨íŠ¸ ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ë¦¬í¬ì§€í„°ë¦¬ì…ë‹ˆë‹¤. dailyfeed-installer (https://githib.com/alpha3002025/dailyfeed-installer) ë‚´ì— git submodule ë¡œ ë“±ë¡ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê°œë°œ ì´ˆì°½ê¸°ì—ëŠ” `dailyfeed-infrastructure` ë‚´ì—ì„œ ì¸í”„ë¼ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì°¨íŠ¸ ì„¤ì •/ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ í•¨ê»˜ ê´€ë¦¬í•˜ë‹¤ê°€ ìœ ì§€ë³´ìˆ˜ì˜ íš¨ìœ¨ì„±ì„ ìœ„í•´ `dailyfeed-app-helm` ì´ë¼ëŠ” ë³„ë„ì˜ github project repository ì— ë¶„ë¦¬í•´ë‘ì—ˆê³ , ê´€ë¦¬ì˜ íš¨ìœ¨ì„±ì„ ìœ„í•´ `dailyfeed-installer` git í”„ë¡œì íŠ¸ ë‚´ì˜ git submodule ë¡œ ë“±ë¡í•´ë‘ì—ˆìŠµë‹ˆë‹¤.<br/>
<br/>

## base-chart
base-chart ì—ëŠ” ì¤‘ë³µë˜ëŠ” í…œí”Œë¦¿ì„ ê³µí†µí™” í•´ë‘” base ì„±ê²©ì˜ chart ë“¤ì„ ëª¨ì•„ë‘ë©°, ë‘ ê°€ì§€ì˜ base chart ë“¤ì„ ë¶„ë¥˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.
```plain
dailyfeed-app-helm
 ã„´ base-chart
     ã„´ dailyfeed-backend-chart
     ã„´ dailyfeed-batch-chart
```
<br/>
- dailyfeed-backend-chart : ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì˜ ê³µí†µë˜ëŠ” ì„¤ì •,í…œí”Œë¦¿ë“¤ì„ base ì„¤ì •ìœ¼ë¡œ ë¶„ë¥˜ ë° ì •ì˜
- dailyfeed-batch-chart : ë°±ì—”ë“œ ì¤‘ batch ì˜ ì„¤ì •, í…œí”Œë¦¿ì„ base ì„¤ì •ìœ¼ë¡œ ë¶„ë¥˜ ë° ì •ì˜
<br/>
<br/>

### base-chart/dailyfeed-backend-chart
Batch ë¥¼ ì œì™¸í•œ ëª¨ë“  ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë“¤ì€ Spring Boot ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ì´ë©°, deploy.yaml ì˜ êµ¬ì¡° ì—­ì‹œ ë¹„ìŠ·í•©ë‹ˆë‹¤. ì´ëŸ° êµ¬ì¡°ë¥¼ ì ìš©í•´ì•¼ í•˜ëŠ” í”„ë¡œì íŠ¸ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.
- dailyfeed-member-svc
- dailyfeed-content-svc
- dailyfeed-timeline-svc
- dailyfeed-search-svc
- dailyfeed-image-svc
- dailyfeed-activity-svc

ìœ„ì˜ ì„œë¹„ìŠ¤ë“¤ ê°ê°ì˜ deploy.yaml ì„ ë³„ë„ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ê°œë°œ ì‘ì—… ì´ˆì°½ê¸°ì—ëŠ” ê·¸ë ‡ê²Œ í˜ë“  ì‘ì—…ì´ ì•„ë‹™ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê³„ì†í•´ì„œ ê°œë°œì‘ì—…ì„ í•  ë•Œë§ˆë‹¤ í•œ ê³³ì— ë³€ê²½ì‘ì—…ì´ ìƒê²¼ì„ ë•Œ N-1 ê°œì˜ í”„ë¡œì íŠ¸ì— ëª¨ë‘ ë˜‘ê°™ì´ ë³µì‚¬í•´ì¤˜ì•¼ í•˜ê³ , ì‚¬ëŒì´ ì§ì ‘ ë³µì‚¬í•´ì„œ ë„£ì„ ê²½ìš° ì‹¤ìˆ˜ì˜ ì†Œì§€ ì—­ì‹œ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ docker image ë¥¼ docker hub ë¥¼ ì“°ë˜ ê²ƒì„ `ghcr.io` ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆì„ ê²½ìš° `deploy.yaml`ì„ ê°œë³„ ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ì—ì„œ ì •ì˜í•˜ê³  ìˆë‹¤ë©´, ëª¨ë‘ í•˜ë‚˜ í•˜ë‚˜ ì¼ì¼ì´ ìˆ˜ì •í•´ì¤˜ì•¼ í•˜ë©°, ê·¸ì¤‘ ë¹¼ëœ¨ë¦°ê²ƒì´ ìˆëŠ”ì§€ í˜¼ë™ë  ê²½ìš° ì—­ì‹œ ìˆìŠµë‹ˆë‹¤.<br/>

ê·¸ëŸ°ë° `base-chart/dailyfeed-backend-chart` ë‚´ì— ê³µí†µìœ¼ë¡œ ì“°ì´ëŠ” í…œí”Œë¦¿ì„ ì¶”ìƒí™”í•´ë‘” í˜„ì¬ì˜ êµ¬ì¡°ë¼ë©´ `dailyfeed-app-helm/base-chart/dailyfeed-backend-chart/templates/deploy.yaml` ë‚´ì— ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ ë¶€ë¶„ë§Œ ìˆ˜ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.<br/>
<br/>

**e.g. `dailyfeed-app-helm/base-chart/dailyfeed-backend-chart/templates/deploy.yaml`**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  ## ...
spec:
  ## ...
  strategy: 
    type: RollingUpdate
  template:
    metadata:
    ## ...
    spec:
      containers:
      - image: ghcr.io/alpha3002025/{{ .Values.appName }}-svc:{{ .Values.imageTag }}
	  ## ...
```
<br/>

#### templates/deploy.yaml
2025.12.03 í˜„ì¬ backend `deploy.yaml` ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br/>
**e.g. `dailfyeed-app-helm/base-chart/dailyfeed-backend-chart/templates/deploy.yaml`**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: {{ .Values.appName }}
  name: {{ .Values.appName }}
  namespace: {{ .Values.namespace }}
spec:
  replicas: {{ .Values.replicas }}
  selector:
    matchLabels:
      app: {{ .Values.appName }}
  strategy: 
    type: RollingUpdate
  template:
    metadata:
      annotations:
        sidecar.istio.io/rewriteAppHTTPProbers: "true"
        traffic.sidecar.istio.io/excludeOutboundPorts: "9092,27017,3306,6379"
      labels:
        app: {{ .Values.appName }}
    spec:
      containers:
      - image: ghcr.io/alpha3002025/{{ .Values.appName }}-svc:{{ .Values.imageTag }}
        imagePullPolicy: {{ .Values.imagePullPolicy }}
        name: {{ .Values.appName }}
        ports:
        - containerPort: {{ .Values.portNumber }}
        env:
        - name: JAVA_TOOL_OPTIONS
          value: "-Djava.net.preferIPv4Stack=true"
        - name: SPRING_PROFILES_ACTIVE
          value: {{ .Values.profile }}
        - name: SERVER_PORT
          value: "{{ .Values.portNumber }}"
        {{- with .Values.envValues }}
        {{- toYaml . | nindent 8 }}
        {{- end }}
        {{- if .Values.debugValues}}
        {{- with .Values.debugValues}}
        {{- toYaml . | nindent 8 }}
        {{- end}}
        {{- end}}
        {{- if .Values.configSecretItems}}
        envFrom:
          {{- range .Values.configSecretItems }}
          - configMapRef:
              name: {{ . | trimSuffix "-nosecret" }}-config
          {{- if not (hasSuffix "-nosecret" .)}}
          - secretRef:
              name: {{ . }}-secret
          {{- end}}
          {{- end}}
        {{- end}}
        resources: 
          requests:
            memory: {{ .Values.resources.memory.requests }}
            cpu: {{ .Values.resources.cpu.requests }}
          limits:
            memory: {{ .Values.resources.memory.limits }}
            cpu: {{ .Values.resources.cpu.limits }}
        lifecycle:
          preStop:
            exec:
              command: ["/bin/sh", "-c", "sleep 10"]
        {{- with .Values.probeValues.readiness }}
        readinessProbe:
          httpGet:
            path: {{ .httpGetPath }}
            port: {{ $.Values.portNumber }}
          initialDelaySeconds: {{ .initialDelaySeconds }}
          periodSeconds: {{ .periodSeconds }}
          successThreshold: {{ .successThreshold }}
          failureThreshold: {{ .failureThreshold }}
        {{- end }}
        {{- with .Values.probeValues.liveness }}
        livenessProbe:
          httpGet:
            path: {{ .httpGetPath }}
            port: {{ $.Values.portNumber }}
          initialDelaySeconds: {{ .initialDelaySeconds }}
          periodSeconds: {{ .periodSeconds }}
          failureThreshold: {{ .failureThreshold }}
        {{- end}}
        {{- with .Values.probeValues.startup}}
        startupProbe:
          httpGet:
            path: {{ .httpGetPath }}
            port: {{ $.Values.portNumber }}
          initialDelaySeconds: {{ .initialDelaySeconds }}
          periodSeconds: {{ .periodSeconds }}
          failureThreshold: {{ .failureThreshold }}
        {{- end}}
        {{- if .Values.persistence }}
        {{- if .Values.persistence.enabled }}
        volumeMounts:
        - name: {{ .Values.appName }}-storage
          mountPath: {{ .Values.persistence.mountPath }}
        {{- end }}
        {{- end }}
      {{- if .Values.persistence }}
      {{- if .Values.persistence.enabled }}
      volumes:
      - name: {{ .Values.appName }}-storage
        persistentVolumeClaim:
          claimName: {{ .Values.appName }}-claim
      {{- end }}
      {{- end }}
status: {}
```
<br/>

í™˜ê²½ë³€ìˆ˜ ë“¤ì˜ ê²½ìš° ë°˜ë³µë¬¸/ì¡°ê±´ë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì†ì„±ë“¤ì„ ì£¼ì…í•˜ëŠ” ì½”ë“œë“¤ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë•Œ base-chart ë‚´ì—ì„œ ì°¸ì¡°í•˜ëŠ” `values.yaml`íŒŒì¼ì€ **`dailfyeed-app-helm/base-chart/dailyfeed-backend-chart/values.yaml`** ì…ë‹ˆë‹¤.<br/>

#### values.yaml
e.g. **`dailfyeed-app-helm/base-chart/dailyfeed-backend-chart/values.yaml`**<br/>
```yaml
namespace: dailyfeed
imageTag: 0.0.1
appName: dailyfeed-backend
replicas: 1
profile: local
portNumber: 8080
envValues: []
configSecretItems: []
imagePullPolicy: Always
resources:
  memory:
    requests: "500Mi"
    limits: "1Gi"
  cpu:
    requests: "500m"
    limits: "1000m"
probeValues:
  readiness:
    httpGetPath: /healthcheck/ready
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 3
  liveness:
    httpGetPath: /healthcheck/live
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 7
  startup:
    httpGetPath: /healthcheck/startup
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 3
persistence:
  enabled: false
  storageClass: local-path
  storageRequest: "1Gi"
  accessModes:
  - ReadWriteOnce
  mountPath: /image

```
<br/>

### íŒ¨í‚¤ì§• (tgz)
ì´ë ‡ê²Œ ì‘ì„±í•œ ì°¨íŠ¸ëŠ” íŒ¨í‚¤ì§•ì„ í†µí•´ ì••ì¶•ëœ í˜•ì‹ì¸`.tgz`íŒŒì¼ë¡œ ì¶”ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼  ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì¶”ì¶œê°€ëŠ¥í•©ë‹ˆë‹¤.
```sh
helm package . -f values.yaml
```
<br/>

ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.
```
ls
...
-rw-r--r--@ 1 someuser  staff   2.2K 10ì›” 23 16:43 dailyfeed-backend-chart-0.1.0.tgz
-rw-r--r--@ 1 someuser  staff   4.8K 10ì›” 28 17:54 dailyfeed-backend-chart-1.0.0.tgz
-rw-r--r--@ 1 someuser  staff   9.7K 10ì›” 31 11:23 dailyfeed-backend-chart-1.0.1.tgz
```
<br/>

`0.1.0.tgz` ì™€ ê°™ì€ ë²„ì „ ëª…ì€ `Chart.yaml` ë‚´ì˜ `version` ì†ì„±ì— ì •ì˜í•´ë‘” ê°’ì…ë‹ˆë‹¤.
e.g. **`dailfyeed-app-helm/base-chart/dailyfeed-backend-chart/Chart.yaml`**<br/>
```yaml
apiVersion: v2
name: dailyfeed-backend-chart
description: A Helm chart for Kubernetes
type: application
version: 1.0.3 ## version
```
<br/>

## batch-chart/dailyfeed-batch-chart
batch ì˜ ê²½ìš° `Deployment`ê°€ ì•„ë‹Œ `Cronjob`ìœ¼ë¡œ êµ¬ì„±ë˜ê¸°ì— Helm Chart ì˜ êµ¬ì¡°ê°€ `dailyfeed-backend-chart`ì™€ ë§ì€ ë¶€ë¶„ì´ ë‹¤ë¦…ë‹ˆë‹¤. ë”°ë¼ì„œ batch í”„ë¡œì íŠ¸ì˜ ê²½ìš° `batch-chart/dailyfeed-batch-chart` ë‚´ì— ë³„ë„ë¡œ ì°¨íŠ¸ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

e.g. **`dailfyeed-app-helm/base-chart/dailyfeed-batch-chart/templates`**<br/>
templates ë””ë ‰í„°ë¦¬ë¡œ ì´ë™í•´ì„œ ì–´ë–¤ cronjob ë“¤ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```sh
cd dailfyeed-app-helm/base-chart/dailyfeed-batch-chart/templates

ls -al
-rw-r--r--@ 1 someuser  staff   3.6K 11ì›” 12 09:54 cronjob-jwt-key-rotation.yaml
-rw-------@ 1 someuser  staff   3.2K 11ì›” 30 16:21 cronjob-kafka-topic-creator.yaml
-rw-r--r--@ 1 someuser  staff   3.8K 11ì›” 26 16:45 cronjob-listener-dead-letter-restore.yaml
-rw-r--r--@ 1 someuser  staff   3.8K 11ì›” 26 16:45 cronjob-publisher-dead-letter-restore.yaml
-rw-r--r--@ 1 someuser  staff   3.6K 11ì›” 12 09:55 cronjob-token-cleanup.yaml
```
<br/>

ìœ„ì˜ cronjob ë“¤ ì¤‘ ì œì¼ ì²«ë²ˆì§¸ íŒŒì¼ì¸ `cronjob-jwt-key-rotation.yaml` ì˜ ë‚´ìš©ì„ ì—´ì–´ì„œ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br/>
e.g. **`dailfyeed-app-helm/base-chart/dailyfeed-batch-chart/templates/cronjob-jwt-key-rotation.yaml`**<br/>
```yaml
{{- if .Values.cronJobs.jwtKeyRotation.enabled }}
apiVersion: batch/v1
kind: CronJob
metadata:
  name: {{ .Values.appName }}-jwt-key-rotation
  namespace: {{ .Values.namespace }}
  labels:
    app: {{ .Values.appName }}
    job-type: jwt-key-rotation
spec:
  # Cron ìŠ¤ì¼€ì¤„ (ê¸°ë³¸: ë§¤ì¼ ìƒˆë²½ 2ì‹œ)
  schedule: {{ .Values.cronJobs.jwtKeyRotation.schedule | quote }}

  # ë™ì‹œ ì‹¤í–‰ ì •ì±…
  concurrencyPolicy: {{ .Values.cronJobs.jwtKeyRotation.concurrencyPolicy }}

  # Job History ê´€ë¦¬
  successfulJobsHistoryLimit: {{ .Values.cronJobs.jwtKeyRotation.successfulJobsHistoryLimit }}
  failedJobsHistoryLimit: {{ .Values.cronJobs.jwtKeyRotation.failedJobsHistoryLimit }}

  jobTemplate:
    spec:
      # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„
      ttlSecondsAfterFinished: {{ .Values.cronJobs.jwtKeyRotation.ttlSecondsAfterFinished }}

      # ì¬ì‹œë„ íšŸìˆ˜
      backoffLimit: {{ .Values.cronJobs.jwtKeyRotation.backoffLimit }}

      template:
        metadata:
          labels:
            app: {{ .Values.appName }}
            job-type: jwt-key-rotation
        spec:
          restartPolicy: {{ .Values.cronJobs.jwtKeyRotation.restartPolicy }}

          containers:
          - name: {{ .Values.appName }}-jwt-key-rotation
            image: ghcr.io/alpha3002025/{{ .Values.appName }}-svc:{{ .Values.imageTag }}
            imagePullPolicy: {{ .Values.imagePullPolicy }}

            # ë°°ì¹˜ Job ì‹¤í–‰ ëª…ë ¹
            args:
            - "--spring.profiles.active={{ .Values.profile }}"
            - "--spring.batch.job.name=jwtKeyRotationJob"
            - "--spring.task.scheduling.enabled=false"
            - "--spring.main.web-application-type=none"
            - "requestedAt=$(date +%Y-%m-%dT%H:%M:%S.%N)"

            env:
            - name: SPRING_PROFILES_ACTIVE
              value: {{ .Values.profile }}
            - name: MYSQL_JDBC_URL
              valueFrom:
                configMapKeyRef:
                  name: mysql-config
                  key: MYSQL_JDBC_URL
            - name: MYSQL_USERNAME
              valueFrom:
                secretKeyRef:
                  name: mysql-secret
                  key: MYSQL_USERNAME
            - name: MYSQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: mysql-secret
                  key: MYSQL_PASSWORD
            - name: MYSQL_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: mysql-config
                  key: MYSQL_SCHEMA
            - name: REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: redis-config
                  key: REDIS_HOST
            - name: REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: redis-config
                  key: REDIS_PORT
            - name: MONGODB_URI
              valueFrom:
                secretKeyRef:
                  name: mongodb-secret
                  key: MONGODB_URI
            - name: KAFKA_BOOTSTRAP_SERVERS
              valueFrom:
                secretKeyRef:
                  name: kafka-secret
                  key: KAFKA_BOOTSTRAP_SERVERS
            {{- with .Values.cronJobs.jwtKeyRotation.envValues }}
            {{- toYaml . | nindent 12 }}
            {{- end }}

            resources:
              requests:
                memory: {{ .Values.cronJobs.jwtKeyRotation.resources.memory.requests }}
                cpu: {{ .Values.cronJobs.jwtKeyRotation.resources.cpu.requests }}
              limits:
                memory: {{ .Values.cronJobs.jwtKeyRotation.resources.memory.limits }}
                cpu: {{ .Values.cronJobs.jwtKeyRotation.resources.cpu.limits }}
{{- end }}
```
<br/>

`cronJobs.jwtKeyRotation.enabled` ë¥¼ ë³´ì‹œë©´ values.yaml ë‚´ì— `cronJobs` ì†ì„± ì•„ë˜ì— `jwtKeyRotation` í•„ë“œ ë‚´ì˜ `enabled` í•„ë“œì˜ ê°’ì´ `true`ì¼ë•Œì—ë§Œ ì‹¤í–‰ë˜ë„ë¡ ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `templates` ë‚´ì— ì •ì˜í•´ë‘” cronjob ì´ ì‹¤í–‰ë  ì§€ë¥¼ enabled ì— true/false ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì— ë”°ë¼ ê²°ì •ë˜ë„ë¡ í•´ë‘ì—ˆìŠµë‹ˆë‹¤.<br/>

> helm ì— ëŒ€í•´ ëª¨ë¥´ëŠ” ë¶„ë“¤ì´ ìˆì„ ìˆ˜ ìˆì–´ì„œ ê¸°ë³¸ì ì¸ ë‚´ìš©ì„ ì–¸ê¸‰í•´ë³´ë©´, helm install ì‹œì—ëŠ” ì„¤ì¹˜í•˜ë ¤ëŠ” í•´ë‹¹ chart ë‚´ì˜ templates ë””ë ‰í„°ë¦¬ ë‚´ì˜ ëª¨ë“  yaml ì„ í´ëŸ¬ìŠ¤í„°ì— ì ìš©ë˜ê²Œ ë©ë‹ˆë‹¤. <br/>

<br/>
values.yaml ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
e.g. **`dailfyeed-app-helm/base-chart/dailyfeed-batch-chart/values.yaml`**<br/>

```yaml
namespace: dailyfeed
imageTag: 1.0.0
appName: dailyfeed-batch
replicas: 1
profile: local
portNumber: 8080
envValues: []
configSecretItems: []
imagePullPolicy: Always
resources:
  memory:
    requests: "500Mi"
    limits: "1Gi"
  cpu:
    requests: "500m"
    limits: "1000m"
probeValues:
  readiness:
    httpGetPath: /healthcheck/ready
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 3
  liveness:
    httpGetPath: /healthcheck/live
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 7
  startup:
    httpGetPath: /healthcheck/startup
    httpGetPort: 8080
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
    failureThreshold: 3
persistence:
  enabled: false
  storageClass: local-path
  storageRequest: "1Gi"
  accessModes:
  - ReadWriteOnce
  mountPath: /image

# CronJob ì„¤ì • (Production í™˜ê²½ ê¸°ë³¸ê°’)
cronJobs:
  # JWT Key Rotation Job - Production: ë§¤ì¼ ìƒˆë²½ 2ì‹œ
  jwtKeyRotation:
    enabled: true
    # Cron ìŠ¤ì¼€ì¤„: ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ì‹¤í–‰
    schedule: "0 2 * * *"
    # ë™ì‹œ ì‹¤í–‰ ë°©ì§€ (Forbid: ì´ì „ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ìƒˆ ì‘ì—… ì‹œì‘ ì•ˆí•¨)
    concurrencyPolicy: "Forbid"
    # Job History ìœ ì§€ ê°œìˆ˜
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„ (ì´ˆ)
    ttlSecondsAfterFinished: 3600
    # ì¬ì‹œë„ íšŸìˆ˜
    backoffLimit: 2
    # Pod ì¬ì‹œì‘ ì •ì±…
    restartPolicy: "Never"
    # í™˜ê²½ë³€ìˆ˜ (í•„ìš”ì‹œ ì¶”ê°€)
    envValues: []
    # ë¦¬ì†ŒìŠ¤ ì„¤ì •
    resources:
      memory:
        requests: "256Mi"
        limits: "512Mi"
      cpu:
        requests: "200m"
        limits: "500m"

  # Token Cleanup Job
  tokenCleanup:
    enabled: true
    # Cron ìŠ¤ì¼€ì¤„: ë§¤ì¼ ìƒˆë²½ 3ì‹œì— ì‹¤í–‰
    schedule: "0 3 * * *"
    # ë™ì‹œ ì‹¤í–‰ ë°©ì§€
    concurrencyPolicy: "Forbid"
    # Job History ìœ ì§€ ê°œìˆ˜
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„ (ì´ˆ)
    ttlSecondsAfterFinished: 3600
    # ì¬ì‹œë„ íšŸìˆ˜
    backoffLimit: 2
    # Pod ì¬ì‹œì‘ ì •ì±…
    restartPolicy: "Never"
    # í™˜ê²½ë³€ìˆ˜ (í•„ìš”ì‹œ ì¶”ê°€)
    envValues: []
    # ë¦¬ì†ŒìŠ¤ ì„¤ì •
    resources:
      memory:
        requests: "256Mi"
        limits: "512Mi"
      cpu:
        requests: "200m"
        limits: "500m"

  # Listener Dead Letter Restore Job - Kafka Listener Dead Letter ë³µêµ¬ ë°°ì¹˜
  listenerDeadletterRestore:
    enabled: true
    # Cron ìŠ¤ì¼€ì¤„: 1ë¶„ë§ˆë‹¤ ì‹¤í–‰
    schedule: "*/1 * * * *"
    # ë™ì‹œ ì‹¤í–‰ ë°©ì§€ (Forbid: ì´ì „ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ìƒˆ ì‘ì—… ì‹œì‘ ì•ˆí•¨)
    concurrencyPolicy: "Forbid"
    # Job History ìœ ì§€ ê°œìˆ˜
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„ (ì´ˆ)
    ttlSecondsAfterFinished: 300
    # ì¬ì‹œë„ íšŸìˆ˜
    backoffLimit: 2
    # Pod ì¬ì‹œì‘ ì •ì±…
    restartPolicy: "Never"
    # í™˜ê²½ë³€ìˆ˜ (í•„ìš”ì‹œ ì¶”ê°€)
    envValues: []
    # ë¦¬ì†ŒìŠ¤ ì„¤ì •
    resources:
      memory:
        requests: "256Mi"
        limits: "512Mi"
      cpu:
        requests: "200m"
        limits: "500m"

  # Publisher Dead Letter Restore Job - Kafka Publisher Dead Letter ë³µêµ¬ ë°°ì¹˜
  publishDeadletterRestore:
    enabled: true
    # Cron ìŠ¤ì¼€ì¤„: 1ë¶„ë§ˆë‹¤ ì‹¤í–‰
    schedule: "*/1 * * * *"
    # ë™ì‹œ ì‹¤í–‰ ë°©ì§€ (Forbid: ì´ì „ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ìƒˆ ì‘ì—… ì‹œì‘ ì•ˆí•¨)
    concurrencyPolicy: "Forbid"
    # Job History ìœ ì§€ ê°œìˆ˜
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„ (ì´ˆ)
    ttlSecondsAfterFinished: 300
    # ì¬ì‹œë„ íšŸìˆ˜
    backoffLimit: 2
    # Pod ì¬ì‹œì‘ ì •ì±…
    restartPolicy: "Never"
    # í™˜ê²½ë³€ìˆ˜ (í•„ìš”ì‹œ ì¶”ê°€)
    envValues: []
    # ë¦¬ì†ŒìŠ¤ ì„¤ì •
    resources:
      memory:
        requests: "256Mi"
        limits: "512Mi"
      cpu:
        requests: "200m"
        limits: "500m"

  # Kafka Topic Creator Job - ë‚ ì§œ ê¸°ë°˜ í† í”½ ì‚¬ì „ ìƒì„± (D+1)
  kafkaTopicCreator:
    enabled: true
    # Cron ìŠ¤ì¼€ì¤„: ë§¤ì¼ 23:50ì— ì‹¤í–‰ (ë‹¤ìŒë‚  í† í”½ ì‚¬ì „ ìƒì„±)
    schedule: "50 23 * * *"
    # ë™ì‹œ ì‹¤í–‰ ë°©ì§€
    concurrencyPolicy: "Forbid"
    # Job History ìœ ì§€ ê°œìˆ˜
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    # Job ì™„ë£Œ í›„ Pod ìœ ì§€ ì‹œê°„ (ì´ˆ)
    ttlSecondsAfterFinished: 300
    # ì¬ì‹œë„ íšŸìˆ˜
    backoffLimit: 2
    # Pod ì¬ì‹œì‘ ì •ì±…
    restartPolicy: "Never"
    # Kafka CLI ì´ë¯¸ì§€
    image: "bitnami/kafka:3.6"
    # ìƒì„±í•  í† í”½ ëª©ë¡
    topics:
      - prefix: "member-activity-"
        partitions: 6
        replicationFactor: 2
        retentionMs: 604800000  # 7ì¼
        cleanupPolicy: "delete"
    # ë¦¬ì†ŒìŠ¤ ì„¤ì •
    resources:
      memory:
        requests: "128Mi"
        limits: "256Mi"
      cpu:
        requests: "100m"
        limits: "200m"

```
<br/>
<br/>


## ê°œë³„ ì„œë¹„ìŠ¤ chart
**`dailfyeed-app-helm`** ë‚´ì—ëŠ”  `member`, `content`, `timeline`, `search`, `activity`, `batch`, `content`, `frontend`, `image` ë“± ê°œë³„ ì„œë¹„ìŠ¤ì— ëŒ€í•œ chart ë“¤ì´ ìˆìœ¼ë©° ì´ ê°œë³„ ì„œë¹„ìŠ¤ chart ë””ë ‰í„°ë¦¬ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ profile ì´ `local`ì¸ì§€, `dev`ì¸ì§€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë™ì‘í• ìˆ˜ ìˆë„ë¡ `values-local.yaml`, `values-dev.yaml`íŒŒì¼ë“¤ì´ ê°œë³„ì ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. <br/>
<br/>

> hpa-configs ë¼ëŠ” ë””ë ‰í„°ë¦¬ ì—­ì‹œ ë³´ì´ëŠ”ë°, HPA ì„¤ì •ì— ëŒ€í•´ì„œëŠ” ë³„ë„ì˜ ë¬¸ì„œì—ì„œ ë”°ë¡œ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br/>

<br/>

e.g. **`dailfyeed-app-helm`**<br/>
```bash
cd dailfyeed-app-helm && ls -al
## ê°œë³„ ì„œë¹„ìŠ¤ ì°¨íŠ¸
drwxr-xr-x@ 15 alpha300uk  staff   480B 11ì›” 22 18:00 activity
drwxr-xr-x@  9 alpha300uk  staff   288B 11ì›” 30 16:26 batch
drwxr-xr-x@ 13 alpha300uk  staff   416B 11ì›” 22 18:00 content
drwxr-xr-x@ 10 alpha300uk  staff   320B 11ì›” 22 18:00 frontend
drwxr-xr-x@ 15 alpha300uk  staff   480B 11ì›” 22 18:00 image
drwxr-xr-x@ 15 alpha300uk  staff   480B 11ì›” 22 18:00 member
drwxr-xr-x@ 14 alpha300uk  staff   448B 11ì›” 22 18:00 search
drwxr-xr-x@ 13 alpha300uk  staff   416B 11ì›” 22 18:00 timeline

## ê³µí†µ ì°¨íŠ¸ í…œí”Œë¦¿ íŒ¨í‚¤ì§€
drwxr-xr-x@  7 alpha300uk  staff   224B 11ì›” 22 15:39 base-chart

## hpa ì„¤ì • (ë’¤ì—ì„œ ì„¤ëª…)
drwxr-xr-x@ 11 alpha300uk  staff   352B 11ì›” 10 14:10 hpa-configs

## istio ì„¤ì • (ë‹¤ë¥¸ ë¬¸ì„œì—ì„œ ì„¤ëª…)
drwxr-xr-x@ 16 alpha300uk  staff   512B 10ì›” 26 16:08 istio-configs

## ì‰˜ìŠ¤í¬ë¦½íŠ¸
-rw-r--r--@  1 alpha300uk  staff   1.6K 11ì›” 11 16:59 install-dev.sh
-rw-r--r--@  1 alpha300uk  staff   1.6K 11ì›” 11 16:57 install-local.sh
-rw-r--r--@  1 alpha300uk  staff   892B 10ì›” 12 11:39 uninstall-dev.sh
-rw-r--r--@  1 alpha300uk  staff   892B 10ì›” 12 11:39 uninstall-local.sh

```


